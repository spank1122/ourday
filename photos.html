<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‚ú®</title>

  <link rel="stylesheet" href="assets/theme.css">
  <link rel="icon" type="image/png" href="assets/favicon.png">
  <meta property="og:title" content="Our Day üíó">
  <meta property="og:description" content="‡∏´‡∏°‡∏π‡∏≠‡πâ‡∏ß‡∏ô √ó ‡∏´‡∏°‡∏π‡∏à‡∏¥‡πã‡∏ß">
  <meta property="og:image" content="assets/og.png">
  <meta property="og:type" content="website">
  <meta name="theme-color" content="#ff5e9a">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: linear-gradient(135deg, #ffe6ee 0%, #fff0f7 50%, #ffe6ee 100%);
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;

      /* ‚úÖ ‡πÅ‡∏Å‡πâ‡πÇ‡∏î‡∏ô‡∏ö‡∏±‡∏á navbar */
      display: flex;
      justify-content: center;
      align-items: flex-start;
      position: relative;
      padding: 120px 20px 20px; /* ‚úÖ ‡∏î‡∏±‡∏ô‡∏•‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å navbar */
    }

    .bubble {
      position: fixed;
      border-radius: 50%;
      pointer-events: none;
      animation: float-down 8s ease-in infinite;
      z-index: 0;
    }
    .bubble::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), transparent);
      border-radius: 50%;
    }
    .bubble:nth-child(1) { width: 60px; height: 60px; left: 10%; top: -60px; background: rgba(255, 107, 149, 0.15); animation-delay: 0s; }
    .bubble:nth-child(2) { width: 40px; height: 40px; left: 30%; top: -40px; background: rgba(255, 182, 193, 0.2); animation-delay: 2s; }
    .bubble:nth-child(3) { width: 50px; height: 50px; left: 60%; top: -50px; background: rgba(255, 107, 149, 0.12); animation-delay: 4s; }
    .bubble:nth-child(4) { width: 35px; height: 35px; left: 80%; top: -35px; background: rgba(255, 182, 193, 0.18); animation-delay: 3s; }

    @keyframes float-down {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(120vh) rotate(360deg); opacity: 0; }
    }

    .main-container {
      position: relative;
      z-index: 10;
      width: 100%;
      max-width: 900px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .title {
      font-size: 2.5rem;
      color: #ff6b95;
      font-weight: 700;
      margin-bottom: 10px;
      text-shadow: 0 2px 15px rgba(255, 107, 149, 0.25);
      animation: fadeInDown 0.8s ease-out;
      text-align: center;
    }

    .subtitle {
      font-size: 1.1rem;
      color: #ff8ab9;
      margin-bottom: 40px;
      font-weight: 400;
      text-shadow: 0 1px 10px rgba(255, 107, 149, 0.15);
      animation: fadeInUp 0.8s ease-out 0.2s both;
      text-align: center;
    }

    .gallery-container {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(20px);
      border-radius: 30px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(255, 107, 149, 0.2);
      border: 2px solid rgba(255, 107, 149, 0.1);
      animation: fadeInScale 0.8s ease-out 0.4s both;
      width: 100%;
    }

    .controls {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
    }

    .btn-primary {
      background: linear-gradient(135deg, #ff5e9a 0%, #ff8ab9 100%);
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 20px;
      font-size: 0.95rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      box-shadow: 0 10px 25px rgba(255, 107, 149, 0.2);
      font-family: 'Poppins', sans-serif;
    }
    .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 15px 40px rgba(255, 107, 149, 0.3); }

    .search-bar { flex: 1; min-width: 200px; position: relative; }
    .search-input {
      width: 100%;
      padding: 10px 15px 10px 40px;
      border: 2px solid rgba(255, 107, 149, 0.2);
      border-radius: 20px;
      font-family: 'Poppins', sans-serif;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }
    .search-input:focus {
      outline: none;
      border-color: #ff5e9a;
      box-shadow: 0 0 10px rgba(255, 107, 149, 0.2);
    }
    .search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #ff8ab9; font-size: 1rem; }

    .filter-group { display: flex; gap: 10px; flex-wrap: wrap; }
    .filter-btn {
      background: rgba(255, 107, 149, 0.1);
      color: #ff6b95;
      padding: 8px 15px;
      border: 2px solid rgba(255, 107, 149, 0.2);
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      font-size: 0.85rem;
      font-family: 'Poppins', sans-serif;
      white-space: nowrap;
    }
    .filter-btn:hover, .filter-btn.active {
      background: linear-gradient(135deg, #ff5e9a 0%, #ff8ab9 100%);
      color: white;
      border-color: #ff5e9a;
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .empty-state { text-align: center; padding: 60px 20px; }
    .empty-state-icon { font-size: 4rem; margin-bottom: 20px; }
    .empty-state-text { color: #ff8ab9; font-size: 1.1rem; margin-bottom: 15px; }

    @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px);} to { opacity: 1; transform: translateY(0);} }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px);} to { opacity: 1; transform: translateY(0);} }
    @keyframes fadeInScale { from { opacity: 0; transform: scale(0.9);} to { opacity: 1; transform: scale(1);} }

    @media (max-width: 600px) {
      body { padding-top: 110px; }
      .title { font-size: 2rem; }
      .gallery-container { padding: 25px; }
      .gallery-grid { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; }
      .controls { flex-direction: column; align-items: stretch; }
      .btn-primary { width: 100%; }
      .search-bar { width: 100%; }
      .filter-group { justify-content: flex-start; overflow-x: auto; padding-bottom: 10px; }
    }
  </style>
</head>

<body>
  <div id="appNav"></div>
  <div id="pageFade"></div>

  <!-- Floating Bubbles -->
  <div class="bubble"></div>
  <div class="bubble"></div>
  <div class="bubble"></div>
  <div class="bubble"></div>

  <div class="main-container">
    <h1 class="title">üì∏ ‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üì∏</h1>
    <p class="subtitle">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°</p>

    <div class="gallery-container">
      <div class="controls"></div>

      <div class="gallery-grid" id="galleryGrid"></div>

      <div class="empty-state" id="emptyState" style="display:none;">
        <div class="empty-state-icon">üì∏</div>
        <div class="empty-state-text">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</div>
      </div>

      <div id="pagination"></div>
    </div>
  </div>

  <script>
    // ‚úÖ ‡∏Ñ‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏ß‡πâ (localStorage) ‚Äî ‡πÑ‡∏°‡πà‡∏¢‡∏∏‡πà‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ
    const ITEMS_PER_PAGE = 12;
    const ALLOW_PUBLIC_PAGINATION = true;
    const PERSIST_MODE = "local";

    const urlParams = new URLSearchParams(window.location.search);
    const isAdmin = urlParams.get('admin') === '1' || sessionStorage.getItem('isAdmin') === 'true';
    if (urlParams.get('admin') === '1') sessionStorage.setItem('isAdmin', 'true');

    let photos = [];
    let currentFilter = 'all';
    let currentPage = 1;
    let filteredPhotos = [];
    let searchTerm = '';

    function loadPhotos() {
      if (PERSIST_MODE === "local") {
        return JSON.parse(localStorage.getItem('photos') || '[]');
      }
      return [];
    }
    function savePhotos(nextPhotos) {
      if (PERSIST_MODE === "local") {
        localStorage.setItem('photos', JSON.stringify(nextPhotos));
        return;
      }
    }

    function renderControls() {
      const controlsDiv = document.querySelector('.controls');

      let controlsHTML = `
        <div class="search-bar">
          <span class="search-icon">üîç</span>
          <input type="text" class="search-input" id="searchInput"
            placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà..."
            onkeyup="searchPhotos()">
        </div>
        <div class="filter-group">
          <button class="filter-btn active" onclick="filterPhotos(event, 'all')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
          <button class="filter-btn" onclick="filterPhotos(event, 'name')">‡∏ä‡∏∑‡πà‡∏≠ A-Z</button>
          <button class="filter-btn" onclick="filterPhotos(event, 'date-new')">‡πÉ‡∏´‡∏°‡πà‡∏Å‡πà‡∏≠‡∏ô</button>
          <button class="filter-btn" onclick="filterPhotos(event, 'date-old')">‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô</button>
        </div>
      `;

      if (isAdmin) {
        controlsHTML = `<button class="btn-primary" onclick="alert('‡πÇ‡∏´‡∏°‡∏î‡∏£‡∏π‡∏õ (admin) ‡πÄ‡∏î‡∏¥‡∏°‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà')">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</button>` + controlsHTML;
      }

      controlsDiv.innerHTML = controlsHTML;
    }

    function searchPhotos() {
      searchTerm = (document.getElementById('searchInput').value || '').toLowerCase();
      currentPage = 1;
      applyFiltersAndSearch();
    }

    function filterPhotos(event, type) {
      if (event) {
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
      }
      currentFilter = type;
      currentPage = 1;
      applyFiltersAndSearch();
    }

    function applyFiltersAndSearch() {
      photos = loadPhotos();

      filteredPhotos = photos.filter(photo => {
        const nameMatch = (photo.name || '').toLowerCase().includes(searchTerm);
        const dateMatch = (photo.date || '').includes(searchTerm);
        return nameMatch || dateMatch;
      });

      if (currentFilter === 'name') {
        filteredPhotos.sort((a, b) => (a.name || '').localeCompare((b.name || ''), 'th'));
      } else if (currentFilter === 'date-new') {
        filteredPhotos.sort((a, b) => new Date(b.date) - new Date(a.date));
      } else if (currentFilter === 'date-old') {
        filteredPhotos.sort((a, b) => new Date(a.date) - new Date(b.date));
      }

      renderPhotos();
    }

    function renderPhotos() {
      const galleryGrid = document.getElementById('galleryGrid');
      const emptyState = document.getElementById('emptyState');

      if (filteredPhotos.length === 0) {
        galleryGrid.innerHTML = '';
        emptyState.style.display = 'block';
        return;
      }

      emptyState.style.display = 'none';
      // ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏Ñ‡πà‡πÅ‡∏™‡∏î‡∏á empty state ‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ ‚Äî ‡∏£‡∏π‡∏õ‡πÄ‡∏î‡∏¥‡∏°‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ JS ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡πà‡∏≠‡∏¢ merge ‡πÑ‡∏î‡πâ
      galleryGrid.innerHTML = `<div style="grid-column:1/-1;text-align:center;color:#ff8ab9;font-weight:700;padding:40px 10px;">‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏≠‡∏≤ JS ‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏≤‡πÉ‡∏™‡πà‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ üíó</div>`;
    }

    renderControls();
    applyFiltersAndSearch();
  </script>

  <script src="assets/app.js"></script>
</body>
</html>
